JVM论述题20220904



# JVM基本概念



## JVM运行时数据区相关概念

### 堆

堆，是JVM启动时划分的一块内存区域，用于存放对象，不同的JDK版本实现的方式不一样，不管是物理还是逻辑上主要分为：两代三区，即：新生代、老年代；新生代分为：eden和两个survivor， 是垃圾回收的主战场。

### 方法区

方法区，也是JVM各线程共享的一块内存区域，JVM启动时创建，关闭时释放，用于存放JVM加载的类型信息，运行时常量池、JIT代码缓存、Field信息、method信息等

### 运行时常量池（字符串常量池）

 1.7之前的版本在方法区中，之后的版本在堆中，存储字面型变量、引用类型的内存地址。

 字符串常量池，数据结构是StringTable,是一个类似KV结构的哈希表，存储用双引号标识的String以及都是常量相连接的字符串

### 虚拟机栈

虚拟机栈，JVM中每个线程都会创建各自的栈，每个栈默认大小为1m，可修改，栈的大小决定方法调用的深度，超出了会抛StackOverFlow异常。栈的基本元素，栈帧，存放局部变量表、操作数长，动态链接、方法返回地址等信息，另外，不需要GC。

### 本地方法栈

本地方法栈，与虚拟机栈作用相似，区别在于虚拟机栈为字节码服务，而本地方法栈是使用的Native服务。

### 直接内存

直接内存，不属于JVM内存结构，是物理机的内存，只是JVM可以调用该部分内存



## 为什么堆内存要分年轻代和老年代

主要基于弱分代和强分代假说，将对象根据存活的概率分类，把存活时间长的，放到固定区，从而减少扫描垃圾的时间，降低GC频率，提升JVM的性能。

# Java 对象的生命周期



## 对象的创建过程

​	

 ## 对象的内存分配



## 对象的销毁过程



## 对象的访问方式



## 为什么要内存担保





















